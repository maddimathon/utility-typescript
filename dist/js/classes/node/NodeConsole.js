import * as a from'@inquirer/prompts';const{isArray:b}=Array;import {AbstractConfigurableClass as c} from'../abstracts/AbstractConfigurableClass.js';import {MessageMaker as d} from'../MessageMaker.js';import {VariableInspector as e} from'../VariableInspector.js';import {mergeArgs as f} from'../../functions/index.js';export class NodeConsole extends c{static async sample(A={}){var _=new NodeConsole(A);_.h1('H1: Sample NodeConsole Output');_.log('This is a completely default, single-line message.');_.h2('H2: Multi-line Strings');_.log(['This is a completely default array of messages (via log).','','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.','Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.','---','Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.']);A.debug&&(_.separator(),_.logs([['This is a completely default array of messages (via logs).'],[''],['Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.'],['Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.'],['---'],['I AM BLUE.',{clr:'blue',flag:!0}],['Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.']]));_.separator();_.log('This message has a hanging indent. \nLorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend. Cras congue orci quis justo tristique vehicula. \nSuspendisse pretium eros et mauris vehicula, non facilisis libero venenatis.',{hangingIndent:' '.repeat(8)});A.debug&&(_.separator(),_.log(['This array message has a hanging indent.','','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.','Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.','---','Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.'],{hangingIndent:' '.repeat(8)}));_.h2('H2: Colours');var B=['black','grey','red','orange','yellow','green','turquoise','blue','purple','pink'],D=[];for(const C of B)D.push([`This is a ${C}, italic message.`,{clr:C,italic:!0}]);var E=[];for(const _A of B)E.push([`This is a ${_A}, bold, italic, flag message.`,{clr:_A,bold:!0,flag:!0,italic:!0}]);_.logs(D,{joiner:'\n'});_.h3('H3: Flags');_.logs(E,{joiner:'\n'});_.heading('H4: Random Test Heading',4);_.h2('H2: Styles');_.log('This is a red, italic message.',{clr:'red',italic:!0});_.log('This is a turquoise, bold message.',{clr:'turquoise',bold:!0});_.log('This message is both bold *and* italic.',{bold:!0,italic:!0});_.h2('H2: Depth');for(let i=0;i<=7;i++)_.log([`This is a depth level ${i} message.`,'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend. Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis.'],{depth:i});_.h2('H2: Timestamps');_.timestampLog('This is a red, italic timestamped message.',{clr:'red',italic:!0});_.timestampLog('This is a turquoise, bold timestamped message.',{clr:'turquoise',bold:!0});_.timestampLog('This timestamped message is both bold *and* italic.',{bold:!0,italic:!0});A.debug&&(_.timestampLog(['This is an array timestamped message.','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.','Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.','Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.'],{clr:'purple'}),_.timestampLog([['This is a bulk timestamped message.'],['I AM BLUE.',{clr:'blue',flag:!0}],['Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.'],['Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.'],['Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.']],{clr:'purple'}));_.h3('H3: Timestamped Depth');for(let i=0;i<=7;i++)_.timestampLog([`This is a timestamped depth level ${i} message.`,'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend. Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis.'],{depth:i});if(A.debug){_.h2('H2: Variable Inspections');var F=e.sampleComplexObject;_.varDump({exampleVariable:F});_.timestampVarDump({exampleVariable:F})}_.h2('H2: Interactivity');await NodeConsole.sampleInteractivity(_,A);_.h1('All done! (in purple)',{clr:'purple'});return _}static async sampleInteractivity(aA,_B={}){!aA&&(aA=new NodeConsole(_B));var _C=async (aB,aC,aD,_D=[])=>{var _E,_F;aA.varDump({result:await aA.prompt(aB,{...aD!==null&&aD!==void 0&&aD,message:aC})});if(_B.debug)for(const aE of _D){const aF={result:await aA.prompt(aB,{...aD!==null&&aD!==void 0&&aD,...aE!==null&&aE!==void 0&&aE})},aG={...(_E=aD.msgArgs)!==null&&_E!==void 0&&_E,...(_F=aE.msgArgs)!==null&&_F!==void 0&&_F,bold:!1,italic:!1};aE.timestamp?aA.timestampVarDump(aF,aG):aA.varDump(aF,aG)}};aA.h3('H3: Bool');await _C('bool','This bool method should let you say yes or no:',{},[{message:'This method should have a depth level 1 and be red:',msgArgs:{clr:'red',depth:1}},{message:'This timestamped bool method should have a depth level 2 and be a yellow flag:',msgArgs:{clr:'yellow',depth:2,flag:!0,timestamp:!0}}]);aA.h3('H3: Input');await _C('input','This input method should let you input a custom string:',{validate:aH=>aH=='I_AM_A_ERROR'?'Your string matched the test error string, pick something else':!0},[{message:'This input method should have a depth level 1 and be orange:',msgArgs:{clr:'orange',depth:1}},{message:'This timestamped input method should have a depth level 2 and be purple:',msgArgs:{clr:'purple',depth:2,timestamp:!0}}]);aA.h3('H3: Select');await _C('select','This select method should let you choose from a multiple-choice list:',{choices:['Simple Option 1','Simple Option 2',{value:'example hidden value',description:'Option description',name:'Detailed Option 1'},{value:'Detailed Option 2',description:'Option description',disabled:!0},{value:'Detailed Option 3',disabled:'(this option is disabled with a message)'},{value:4,description:'This option returns a number',name:'Detailed Option 4'}]},[{message:'This timestamped select method should have a depth level 3 and be turquoise:',msgArgs:{clr:'turquoise',depth:3,timestamp:!0}},{message:'This select method should have a depth level 1:',msgArgs:{depth:1}},{message:'This select method should have a depth level 2:',msgArgs:{depth:2}},{message:'This select method should have a depth level 3:',msgArgs:{depth:3}}]);return aA}get ARGS_DEFAULT(){var aI={msgMaker:{msg:{maxWidth:100,tab:'        '},paintFormat:'node'},optsRecursive:!0,separator:null,styleClrs:{disabled:'grey',error:'red',help:'grey',highlight:'purple'},varInspect:{}},aJ=aI;return aI}buildArgs(aK){var aL=c.abstractArgs(this.ARGS_DEFAULT),aM=f(aL,aK,this.ARGS_DEFAULT.optsRecursive);aK===null||aK===void 0?void 0:aK.msgMaker&&(aM.msgMaker=d.prototype.buildArgs(f(aL.msgMaker,aK.msgMaker,d.prototype.ARGS_DEFAULT.optsRecursive)));return aM}get maxWidth(){var _a,_b,_c;return (_c=(_b=(_a=this.args.msgMaker)===null||_a===void 0?void 0:_a.msg)===null||_b===void 0?void 0:_b.maxWidth)!==null&&_c!==void 0?_c:120}constructor(aN={}){super(aN);this.msg=new d(this.args.msgMaker)}log(aO,aP={}){var aQ;console[(aQ=aP.via)!==null&&aQ!==void 0?aQ:'log'](this.msg.msg(aO,aP))}logs(aR,aS={}){var aT;!b(aR)&&(aR=[aR]);console[(aT=aS.via)!==null&&aT!==void 0?aT:'log'](this.msg.msgs(aR,aS))}timestampLog(aU,aV={},aW={}){var aX;console[(aX=aV.via)!==null&&aX!==void 0?aX:'log'](this.msg.timestampMsg(aU,aV,aW))}timestampVarDump(aY,aZ={},bA={}){this.timestampLog(e.stringify(aY,this.mergeArgs(this.args.varInspect,aZ)),aZ,bA)}varDump(bB,bC={}){this.log(e.stringify(bB,this.mergeArgs(this.args.varInspect,bC)),bC)}heading(bD,bE,bF={}){var bG,bH,bI,g,h,I;var j={bold:!0,joiner:'\n',...bF,linesIn:2,linesOut:1,maxWidth:(bG=bF.maxWidth)!==null&&bG!==void 0?bG:this.maxWidth};let k=[[bD]];switch(bE) {case 1:j.clr=(bH=j.clr)!==null&&bH!==void 0?bH:null;j.linesIn=3;k=[[bD.toUpperCase(),{flag:!0,fullWidth:!0}],['='.repeat(this.maxWidth)]];break;case 2:j.clr=(bI=j.clr)!==null&&bI!==void 0?bI:'purple';j.maxWidth=this.maxWidth*2/3;k=[[bD,{flag:!0,fullWidth:!0}],['+ '.repeat(j.maxWidth/2).trim()]];break;case 3:j.clr=(g=j.clr)!==null&&g!==void 0?g:'turquoise';j.maxWidth=this.maxWidth/3;k=[[bD,{flag:!0,fullWidth:!0}],['+ '.repeat(j.maxWidth/2).trim()]];break;default:j.clr=(h=j.clr)!==null&&h!==void 0?h:'green';k=[[bD,{flag:!0}],['- '.repeat(Math.ceil(Math.min(bD.length,j.maxWidth/2)/2+1.5)).trim()]];break}console[(I=j.via)!==null&&I!==void 0?I:'log'](this.msg.msgs(k,j))}separator(bJ={}){var bK,bL,bM,bN,bO;var G=this.maxWidth/4,H=' '.repeat(G),_i={bold:!0,clr:'grey',...(bL=(bK=this.args.separator)===null||bK===void 0?void 0:bK[1])!==null&&bL!==void 0&&bL};console[(bM=bJ.via)!==null&&bM!==void 0?bM:'log'](this.msg.msg((bO=(bN=this.args.separator)===null||bN===void 0?void 0:bN[0])!==null&&bO!==void 0?bO:['',H+'- '.repeat(G).trim()+H,''],{..._i,...bJ}))}async prompt(bP,bQ){var bR,bS,bT,bU,_g;var _h=this.mergeArgs({msgArgs:{}},bQ,!1),{depth:_I=0,indent:J='',hangingIndent:K='',linesIn:l=0,linesOut:m=0,timestamp:n=!1}=(bR=_h.msgArgs)!==null&&bR!==void 0?bR:{},o={bold:!0,...(bS=_h.msgArgs)!==null&&bS!==void 0&&bS,linesIn:0,linesOut:0,depth:0,hangingIndent:'',indent:''},p={...this.args.styleClrs,...(bT=_h.styleClrs)!==null&&bT!==void 0&&bT,highlight:(_g=(bU=_h.styleClrs)===null||bU===void 0?void 0:bU.highlight)!==null&&_g!==void 0?_g:((o.clr&&o.clr!='black'&&o.clr!='grey')?o.clr:this.args.styleClrs.highlight)},q=this.msg.args.msg.tab.repeat(_I)+' '.repeat(K.length+J.length),r=n?this.msg.timestampMsg('',o):'',s=n?' '.repeat(this.msg.timestampMsg('').length):'',t=bP=='select'?'  ':'';_h.theme={helpMode:'always',icon:{cursor:'→'},prefix:{done:q+(n?r:this.msg.msg('✓',{clr:p.highlight,...o!==null&&o!==void 0&&o,bold:!0})),idle:q+(n?r:this.msg.msg('?',{...o!==null&&o!==void 0&&o,bold:!0}))},style:{answer:text=>text,description:bV=>'\n'+t+this.msg.msg(bV,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.highlight,italic:!(o===null||o===void 0?void 0:o.italic)}),disabled:bW=>t+this.msg.msg(bW,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.disabled}),error:bX=>q+s+' '.repeat(_h.message.length+(n?1:3))+this.msg.msg(bX,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.error,italic:!(o===null||o===void 0?void 0:o.italic)}),help:bY=>this.msg.msg(bY,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.help,italic:!(o===null||o===void 0?void 0:o.italic)}),highlight:bZ=>this.msg.msg(bZ,{clr:p.highlight,...o!==null&&o!==void 0&&o,bold:!0,italic:!(o===null||o===void 0?void 0:o.italic)}),key:text=>`KEY: (${text})`,message:(cA,cB)=>this.msg.msg(cA,o)},validationFailureMode:'keep'};l&&this.log('\n'.repeat(l));let u;switch(bP) {case 'bool':u=await this.promptBool(_h);break;case 'input':u=await this.promptInput(_h);break;case 'select':u=await this.promptSelect(_h);break}m&&this.log('\n'.repeat(m));return u}async promptBool(cC){return await a.confirm(this.mergeArgs({default:!1},cC,!0))}async promptInput(cD){return await a.input(this.mergeArgs({required:!0},cD,!0))}async promptSelect(cE){return await a.select(this.mergeArgs({pageSize:10},cE,!0))}debug(cF,cG={}){this.log(cF,{...cG,via:'debug'})}debugs(cH,cI={}){this.logs(cH,{...cI,via:'debug'})}h1(cJ,cK={}){this.heading(cJ,1,cK)}h2(cL,cM={}){this.heading(cL,2,cM)}h3(cN,cO={}){this.heading(cN,3,cO)}sep(...cP){this.separator(...cP)}warn(cQ,cR={}){this.log(cQ,{...cR,via:'warn'})}warns(cS,cT={}){this.logs(cS,{...cT,via:'warn'})}}(function(cU){;})(NodeConsole||(NodeConsole={}));