import * as a from'@inquirer/prompts';const{isArray:b}=Array;import {AbstractConfigurableClass as c} from'../abstracts/AbstractConfigurableClass.js';import {MessageMaker as d} from'../MessageMaker.js';import {VariableInspector as e} from'../VariableInspector.js';import {mergeArgs as f} from'../../functions/index.js';export class NodeConsole extends c{static async sample(A={}){var _=new NodeConsole(A);_.h1('H1: Sample NodeConsole Output');_.log('This is a completely default, single-line message.');_.h2('H2: Multi-line Strings');_.log(['This is a completely default array of messages (via log).','','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.','Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.','---','Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.']);A.debug&&(_.separator(),_.logs([['This is a completely default array of messages (via logs).'],[''],['Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.'],['Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.'],['---'],['I AM BLUE.',{clr:'blue',flag:!0}],['Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.']]));_.separator();_.log('This message has a hanging indent. \nLorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend. Cras congue orci quis justo tristique vehicula. \nSuspendisse pretium eros et mauris vehicula, non facilisis libero venenatis.',{hangingIndent:' '.repeat(8)});A.debug&&(_.separator(),_.log(['This array message has a hanging indent.','','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.','Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.','---','Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.'],{hangingIndent:' '.repeat(8)}));_.h2('H2: Colours');var B=['black','grey','red','orange','yellow','green','turquoise','blue','purple','pink'],D=[],F=[];for(const C of B)D.push([`This is a ${C}, italic message.`,{clr:C,italic:!0}]);_.logs(D,{joiner:'\n'});var E=[];for(const _A of B)E.push([`This is a ${_A}, bold, italic, flag message.`,{clr:_A,bold:!0,flag:!0,italic:!0}]);_.h3('H3: Flags');_.logs(E,{joiner:'\n'});for(const aA of B)F.push([`This is a ${aA}, bold, italic, reverse flag message.`,{clr:aA,bold:!0,flag:'reverse',italic:!0}]);_.heading('H4: Reversed Flags',4);_.logs(F,{joiner:'\n'});_.heading('H4: Random Test Heading',4);_.h2('H2: Styles');_.log('This is a red, italic message.',{clr:'red',italic:!0});_.log('This is a turquoise, bold message.',{clr:'turquoise',bold:!0});_.log('This message is both bold *and* italic.',{bold:!0,italic:!0});_.h2('H2: Depth');for(let i=0;i<=7;i++)_.log([`This is a depth level ${i} message.`,'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend. Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis.'],{depth:i});_.h2('H2: Timestamps');_.timestampLog('This is a red, italic timestamped message.',{clr:'red',italic:!0});_.timestampLog('This is a turquoise, bold timestamped message.',{clr:'turquoise',bold:!0});_.timestampLog('This timestamped message is both bold *and* italic.',{bold:!0,italic:!0});A.debug&&(_.timestampLog(['This is an array timestamped message.','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.','Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.','Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.'],{clr:'purple'}),_.timestampLog([['This is a bulk timestamped message.'],['I AM BLUE.',{clr:'blue',flag:!0}],['Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend.'],['Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis. Donec tincidunt ex mollis, gravida lectus ac, malesuada est. Aenean sit amet velit dapibus, auctor odio in, fringilla velit. Nullam ut pellentesque dui, sit amet dapibus nibh.'],['Sed ultricies viverra nisi, in sodales mauris vehicula et. Maecenas ut pharetra orci.']],{clr:'purple'}));_.h3('H3: Timestamped Depth');for(let i=0;i<=7;i++)_.timestampLog([`This is a timestamped depth level ${i} message.`,'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi scelerisque dui eu turpis semper eleifend. Cras congue orci quis justo tristique vehicula. Suspendisse pretium eros et mauris vehicula, non facilisis libero venenatis.'],{depth:i});if(A.debug){_.h2('H2: Variable Inspections');var g=e.sampleComplexObject;_.varDump({exampleVariable:g});_.timestampVarDump({exampleVariable:g})}_.h2('H2: Interactivity');await NodeConsole.sampleInteractivity(_,A);_.h1('All done! (in purple)',{clr:'purple'});return _}static async sampleInteractivity(aB,_B={}){!aB&&(aB=new NodeConsole(_B));var _C=async (aC,aD,aE,_D=[])=>{var _E,_F;aB.varDump({result:await aB.prompt(aC,{...aE!==null&&aE!==void 0&&aE,message:aD})});if(_B.debug)for(const aF of _D){const aG={result:await aB.prompt(aC,{...aE!==null&&aE!==void 0&&aE,...aF!==null&&aF!==void 0&&aF})},aH={...(_E=aE.msgArgs)!==null&&_E!==void 0&&_E,...(_F=aF.msgArgs)!==null&&_F!==void 0&&_F,bold:!1,italic:!1};aF.timestamp?aB.timestampVarDump(aG,aH):aB.varDump(aG,aH)}};aB.h3('H3: Bool');await _C('bool','This bool method should let you say yes or no:',{},[{message:'This method should have a depth level 1 and be red:',msgArgs:{clr:'red',depth:1}},{message:'This timestamped bool method should have a depth level 2 and be a yellow flag:',msgArgs:{clr:'yellow',depth:2,flag:!0,timestamp:!0}}]);aB.h3('H3: Input');await _C('input','This input method should let you input a custom string:',{validate:aI=>aI=='I_AM_A_ERROR'?'Your string matched the test error string, pick something else':!0},[{message:'This input method should have a depth level 1 and be orange:',msgArgs:{clr:'orange',depth:1}},{message:'This timestamped input method should have a depth level 2 and be purple:',msgArgs:{clr:'purple',depth:2,timestamp:!0}}]);aB.h3('H3: Select');await _C('select','This select method should let you choose from a multiple-choice list:',{choices:['Simple Option 1','Simple Option 2',{value:'example hidden value',description:'Option description',name:'Detailed Option 1'},{value:'Detailed Option 2',description:'Option description',disabled:!0},{value:'Detailed Option 3',disabled:'(this option is disabled with a message)'},{value:4,description:'This option returns a number',name:'Detailed Option 4'}]},[{message:'This timestamped select method should have a depth level 3 and be turquoise:',msgArgs:{clr:'turquoise',depth:3,timestamp:!0}},{message:'This select method should have a depth level 1:',msgArgs:{depth:1}},{message:'This select method should have a depth level 2:',msgArgs:{depth:2}},{message:'This select method should have a depth level 3:',msgArgs:{depth:3}}]);return aB}get ARGS_DEFAULT(){var aJ={msgMaker:{msg:{maxWidth:100,tab:'        '},paintFormat:'node'},optsRecursive:!0,separator:null,styleClrs:{disabled:'grey',error:'red',help:'grey',highlight:'purple'},varInspect:{}},aK=aJ;return aJ}buildArgs(aL){var aM=c.abstractArgs(this.ARGS_DEFAULT),aN=f(aM,aL,this.ARGS_DEFAULT.optsRecursive);aL===null||aL===void 0?void 0:aL.msgMaker&&(aN.msgMaker=d.prototype.buildArgs(f(aM.msgMaker,aL.msgMaker,d.prototype.ARGS_DEFAULT.optsRecursive)));return aN}get maxWidth(){var _a,_b,_c;return (_c=(_b=(_a=this.args.msgMaker)===null||_a===void 0?void 0:_a.msg)===null||_b===void 0?void 0:_b.maxWidth)!==null&&_c!==void 0?_c:120}constructor(aO={}){super(aO);this.msg=new d(this.args.msgMaker)}log(aP,aQ={}){var aR;console[(aR=aQ.via)!==null&&aR!==void 0?aR:'log'](this.msg.msg(aP,aQ))}logs(aS,aT={}){var aU;!b(aS)&&(aS=[aS]);console[(aU=aT.via)!==null&&aU!==void 0?aU:'log'](this.msg.msgs(aS,aT))}timestampLog(aV,aW={},aX={}){var aY;console[(aY=aW.via)!==null&&aY!==void 0?aY:'log'](this.msg.timestampMsg(aV,aW,aX))}timestampVarDump(aZ,bA={},bB={}){this.timestampLog(e.stringify(aZ,this.mergeArgs(this.args.varInspect,bA)),bA,bB)}varDump(bC,bD={}){this.log(e.stringify(bC,this.mergeArgs(this.args.varInspect,bD)),bD)}heading(bE,bF,bG={}){var bH,bI,bJ,G,h,I;var j={bold:!0,joiner:'\n',...bG,linesIn:2,linesOut:1,maxWidth:(bH=bG.maxWidth)!==null&&bH!==void 0?bH:this.maxWidth};let k=[[bE]];switch(bF) {case 1:j.clr=(bI=j.clr)!==null&&bI!==void 0?bI:null;j.linesIn=3;k=[[bE.toUpperCase(),{flag:!0,fullWidth:!0}],['='.repeat(this.maxWidth)]];break;case 2:j.clr=(bJ=j.clr)!==null&&bJ!==void 0?bJ:'purple';j.maxWidth=this.maxWidth*2/3;k=[[bE,{flag:!0,fullWidth:!0}],['+ '.repeat(j.maxWidth/2).trim()]];break;case 3:j.clr=(G=j.clr)!==null&&G!==void 0?G:'turquoise';j.maxWidth=this.maxWidth/3;k=[[bE,{flag:!0,fullWidth:!0}],['+ '.repeat(j.maxWidth/2).trim()]];break;default:j.clr=(h=j.clr)!==null&&h!==void 0?h:'green';k=[[bE,{flag:!0}],['- '.repeat(Math.ceil(Math.min(bE.length,j.maxWidth/2)/2+1.5)).trim()]];break}console[(I=j.via)!==null&&I!==void 0?I:'log'](this.msg.msgs(k,j))}separator(bK={}){var bL,bM,bN,bO,bP;var _g=this.maxWidth/4,H=' '.repeat(_g),_i={bold:!0,clr:'grey',...(bM=(bL=this.args.separator)===null||bL===void 0?void 0:bL[1])!==null&&bM!==void 0&&bM};console[(bN=bK.via)!==null&&bN!==void 0?bN:'log'](this.msg.msg((bP=(bO=this.args.separator)===null||bO===void 0?void 0:bO[0])!==null&&bP!==void 0?bP:['',H+'- '.repeat(_g).trim()+H,''],{..._i,...bK}))}async prompt(bQ,bR){var bS,bT,bU,bV,_G;var _h=this.mergeArgs({msgArgs:{}},bR,!1),{depth:_I=0,indent:J='',hangingIndent:K='',linesIn:l=0,linesOut:m=0,timestamp:n=!1}=(bS=_h.msgArgs)!==null&&bS!==void 0?bS:{},o={bold:!0,...(bT=_h.msgArgs)!==null&&bT!==void 0&&bT,linesIn:0,linesOut:0,depth:0,hangingIndent:'',indent:''},p={...this.args.styleClrs,...(bU=_h.styleClrs)!==null&&bU!==void 0&&bU,highlight:(_G=(bV=_h.styleClrs)===null||bV===void 0?void 0:bV.highlight)!==null&&_G!==void 0?_G:((o.clr&&o.clr!='black'&&o.clr!='grey')?o.clr:this.args.styleClrs.highlight)},q=this.msg.args.msg.tab.repeat(_I)+' '.repeat(K.length+J.length),r=n?this.msg.timestampMsg('',o):'',s=n?' '.repeat(this.msg.timestampMsg('').length):'',t=bQ=='select'?'  ':'';_h.theme={helpMode:'always',icon:{cursor:'→'},prefix:{done:q+(n?r:this.msg.msg('✓',{clr:p.highlight,...o!==null&&o!==void 0&&o,bold:!0})),idle:q+(n?r:this.msg.msg('?',{...o!==null&&o!==void 0&&o,bold:!0}))},style:{answer:text=>text,description:bW=>'\n'+t+this.msg.msg(bW,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.highlight,italic:!(o===null||o===void 0?void 0:o.italic)}),disabled:bX=>t+this.msg.msg(bX,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.disabled}),error:bY=>q+s+' '.repeat(_h.message.length+(n?1:3))+this.msg.msg(bY,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.error,italic:!(o===null||o===void 0?void 0:o.italic)}),help:bZ=>this.msg.msg(bZ,{...o!==null&&o!==void 0&&o,bold:!1,clr:p.help,italic:!(o===null||o===void 0?void 0:o.italic)}),highlight:cA=>this.msg.msg(cA,{clr:p.highlight,...o!==null&&o!==void 0&&o,bold:!0,italic:!(o===null||o===void 0?void 0:o.italic)}),key:text=>`KEY: (${text})`,message:(cB,cC)=>this.msg.msg(cB,o)},validationFailureMode:'keep'};l&&this.log('\n'.repeat(l));let u;switch(bQ) {case 'bool':u=await this.promptBool(_h);break;case 'input':u=await this.promptInput(_h);break;case 'select':u=await this.promptSelect(_h);break}m&&this.log('\n'.repeat(m));return u}async promptBool(cD){return await a.confirm(this.mergeArgs({default:!1},cD,!0))}async promptInput(cE){return await a.input(this.mergeArgs({required:!0},cE,!0))}async promptSelect(cF){return await a.select(this.mergeArgs({pageSize:10},cF,!0))}debug(cG,cH={}){this.log(cG,{...cH,via:'debug'})}debugs(cI,cJ={}){this.logs(cI,{...cJ,via:'debug'})}h1(cK,cL={}){this.heading(cK,1,cL)}h2(cM,cN={}){this.heading(cM,2,cN)}h3(cO,cP={}){this.heading(cO,3,cP)}sep(...cQ){this.separator(...cQ)}warn(cR,cS={}){this.log(cR,{...cS,via:'warn'})}warns(cT,cU={}){this.logs(cT,{...cU,via:'warn'})}}(function(cV){;})(NodeConsole||(NodeConsole={}));